// Here you will write *javascript* that would be executed by the browser
<% if @card.errors.any? %>
  // Render new card form with errors
  $('#new_card').html("<%= j render 'cards/form', guide: @guide, card: @card %>");
<% else %>
  // Create a card for the new card. But hide it.
  var new_card = $("<%= j render 'shared/card', card: @card %>").hide();
  // Add it to the DOM, at the beginning of the existing cards. It's still hidden.
  $('#guide-cards').prepend(new_card);
  // Show the new card with an animation!
  new_card.fadeIn();
  // Remove the text from the content textarea.
  $('#user_input_autocomplete_address').val('');
  $('#total-places').html('<%= j "Your places (" + @guide.cards.count.to_s + ")" %>');
  markersnewcard = handler.addMarkers(<%= raw @markers_new_card.to_json %>);
  handler.bounds.extendWith(markersnewcard);
  handler.fitMapToBounds();
<% end %>
